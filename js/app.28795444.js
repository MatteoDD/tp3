(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==i[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},i={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/tp3/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0127":function(e,t,r){},"034f":function(e,t,r){"use strict";r("0127")},"25f0":function(e,t,r){},"45c6":function(e,t,r){"use strict";(function(e){r("063a"),r("e2c0"),r("bcee"),r("e4bd"),r("b900");function n(t){var r=t.split(".")[1],n=e.from(r,"base64");return JSON.parse(n.toString())}function i(e){var t=n(e);return t.sub}function a(e){var t=n(e);return t.exp}function s(e){var t=a(e);return!(Date.now()>=t)}t["a"]={decryptedToken:n,getExpiration:a,isAlive:s,getUserId:i}}).call(this,r("257d").Buffer)},"56d7":function(e,t,r){"use strict";r.r(t);r("5675"),r("58c3"),r("59f3"),r("3e3e");var n=r("d04a"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v(e._s(this.HOME_ROUTE_LABEL))]),e.logged?e._e():r("router-link",{attrs:{to:"/login"}},[e._v(e._s(this.LOGIN_ROUTE_LABEL))]),e.logged?e._e():r("router-link",{attrs:{to:"/signup"}},[e._v(e._s(this.SIGNUP_ROUTE_LABEL))]),e.logged?r("router-link",{attrs:{to:"/logout"}},[e._v(e._s(this.LOGOUT_ROUTE_LABEL))]):e._e(),e.logged&&e.isAdmin?r("router-link",{attrs:{to:"/admin32323232"}},[e._v(e._s(this.SECRET_ADMIN_ROUTE_LABEL))]):e._e()],1),r("router-view")],1)},a=[],s={welcomeMessage:"Allo tout le monde !",PARK_LABEL:"Park: ",TRAIL_LABEL:"Trail: ",AMOUNT_OF_LIKE_LABEL:"Amount of likes on this trail : ",LIKE_LABEL:"Like",DISLIKE_LABEL:"Dislike",HOME_ROUTE_LABEL:"Home |",LOGIN_ROUTE_LABEL:" Login |",SIGNUP_ROUTE_LABEL:" Signup ",LOGOUT_ROUTE_LABEL:" Déconnexion",SECRET_ADMIN_ROUTE_LABEL:" || Admin ||",EMAIL_LABEL:"courriel@courriel.com",PASSWORD_LABEL:"********",LOGIN_BUTTON_LABEL:"Se connecter",REGISTER_BUTTON_LABEL:"Créer un compte",NAME_LABEL:"Nom",REGISTER_LABEL:"S'enregistrer",SECRET_TEXT:"Admin Panel de l'application!",SECRET_TIP:"Vous pouvez accéder à la page d'administration, veuillez jeter un coup d'oeil au devtool.",ERROR_MESSAGE:"veillez vous reconnecter, connection expirer",ERROR_MESSAGE_2:"veillez reessayer",ERROR_LIKE:"veillez vous connecter pour liker",install:function(e){e.prototype.$getUiText=function(e){return s[e]}}},o=s,c={name:"App",data:function(){return{HOME_ROUTE_LABEL:o.HOME_ROUTE_LABEL,LOGIN_ROUTE_LABEL:o.LOGIN_ROUTE_LABEL,SIGNUP_ROUTE_LABEL:o.SIGNUP_ROUTE_LABEL,LOGOUT_ROUTE_LABEL:o.LOGOUT_ROUTE_LABEL,SECRET_ADMIN_ROUTE_LABEL:o.SECRET_ADMIN_ROUTE_LABEL}},computed:{logged:function(){return this.$store.getters["authentication/isLoggedIn"]},isAdmin:function(){return"admin"===this.$store.getters["profiles/getRole"]}}},u=c,l=(r("034f"),r("bdd7")),p=Object(l["a"])(u,i,a,!1,null,null,null),d=p.exports,f=r("1783"),m=r("6c71"),g=r("c452"),h=(r("e687"),r("833b"),"https://tp3-api.herokuapp.com"),L=r("8aad"),v=r.n(L),E=v.a.create({});E.interceptors.request.use((function(e){return Te.getters["authentication/isLoggedIn"]&&(e.headers.authorization="Bearer ".concat(Te.state.authentication.token)),e}));var _=E,k=r("5a19"),w=r("5d80"),R=r("7946"),b=r("a927"),O=r("e0e0"),A=(r("bfa3"),function(e){Object(R["a"])(r,e);var t=Object(b["a"])(r);function r(e,n,i){var a;return Object(w["a"])(this,r),a=t.call(this,e),a.codeTxt=n,a.code=i,a}return Object(k["a"])(r)}(Object(O["a"])(Error)));function T(e){if(S(e)){var t=new A("Erreur avec le réseau, impossible de se connecter au serveur");return t}var r=new A(e.response.data,e.response.statusText,e.response.status);return r}function S(e){return!!e.isAxiosError&&!e.response}function x(e){return I.apply(this,arguments)}function I(){return I=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.post("".concat(h,"/api/login"),{email:t.email,password:t.password});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),T(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),I.apply(this,arguments)}function P(e){return y.apply(this,arguments)}function y(){return y=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.post("".concat(h,"/api/register"),{email:t.email,password:t.password,name:t.name});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),T(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),y.apply(this,arguments)}var B={getToken:x,register:P},C=r("45c6"),$={token:"",authServiceError:""},j={isLoggedIn:function(e){return!!e.token},getTokenUserId:function(e){var t=C["a"].getUserId(e.token);return t},isAlive:function(e){var t=C["a"].isAlive(e.token);return!t}},U={clearError:function(e){e.authServiceError=""},initializeAuthentication:function(e,t){e.token=t,e.authServiceError=""},logout:function(e){e.token="",e.authServiceError=""},setAuthServiceError:function(e,t){e.authServiceError=t}},N={login:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,""===t.email&&""===t.password){r.next=12;break}return r.prev=2,r.next=5,B.getToken(t);case 5:i=r.sent,n("initializeAuthentication",i),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),n("setAuthServiceError",r.t0.message);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},register:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,""===t.email||""===t.password||""===t.name){r.next=12;break}return r.prev=2,r.next=5,B.register(t);case 5:i=r.sent,n("initializeAuthentication",i),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),n("setAuthServiceError",r.t0.message);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},logout:function(e){var t=e.commit;t("logout")}},M={namespaced:!0,state:$,actions:N,mutations:U,getters:j};r("351c");function G(e){return z.apply(this,arguments)}function z(){return z=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("".concat(h,"/users/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),T(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),z.apply(this,arguments)}function D(e){return K.apply(this,arguments)}function K(){return K=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.post("".concat(h,"/api/register"),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),T(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),K.apply(this,arguments)}function V(e){return H.apply(this,arguments)}function H(){return H=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.post("".concat(h,"/api/likes"),{userId:t.userId,trailId:t.trailId});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),T(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),H.apply(this,arguments)}function W(e){return F.apply(this,arguments)}function F(){return F=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.delete("".concat(h,"/api/likes/").concat(t.likeId));case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e["catch"](0),T(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),F.apply(this,arguments)}function X(e){return q.apply(this,arguments)}function q(){return q=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("".concat(h,"/api/users/").concat(t,"/likes"));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),T(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),q.apply(this,arguments)}var J={getUserById:G,setUser:D,sendLike:V,getLikes:X,deleteLike:W},Q={profile:{},onError:!1,accountId:""},Y={getProfile:function(e){return e.profile},getAccountId:function(e){return e.accountId},getError:function(e){return e.onError},getRole:function(e){return e.profile.role}},Z={initializeProfile:function(e,t){e.profile.push({email:t.email,password:t.password,name:t.name,role:t.role})},setOnError:function(e){e.onError=!0},profileSetup:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.profile=t;case 1:case"end":return r.stop()}}),r)})))()},setAccountId:function(e,t){e.accountId=t},remouveCurrentUser:function(e){e.profile={},e.onError=!1}},ee={createProfile:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,n("initializeProfileTry",t);case 3:case"end":return r.stop()}}),r)})))()},getProfile:function(e){return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.rootGetters,t.prev=1,i=n["authentication/getTokenUserId"],t.next=5,J.getUserById(i);case 5:a=t.sent,r("profileSetup",a),r("setAccountId",i),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),r("setOnError");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},resetProfile:function(e){return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit,r("remouveCurrentUser");case 2:case"end":return t.stop()}}),t)})))()}},te={namespaced:!0,state:Q,actions:ee,mutations:Z,getters:Y};r("bcee"),r("adc5");function re(){return ne.apply(this,arguments)}function ne(){return ne=Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_.get("".concat(h,"/trails"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function ie(e){return ae.apply(this,arguments)}function ae(){return ae=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_.get("".concat(h,"/trails/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function se(){return oe.apply(this,arguments)}function oe(){return oe=Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_.get("".concat(h,"/parks"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function ce(e){return ue.apply(this,arguments)}function ue(){return ue=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("".concat(h,"/segments/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),ue.apply(this,arguments)}function le(e){return pe.apply(this,arguments)}function pe(){return pe=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],t.forEach(function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,ce(t);case 3:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return fe=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("".concat(h,"/trails/").concat(t,"/likes"));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),fe.apply(this,arguments)}var me={getTrails:re,getParks:se,getSegment:ce,getTrailsId:ie,getAllSegments:le,getNbLikesAssociated:de},ge={parkList:[],trailList:[],selectedPark:{},selectedTrail:{},segments:[],segmentList:[],nbLikesAssociated:[],onError:!1},he={getParkList:function(e){return e.parkList},getTrailList:function(e){return e.trailList},getSelectPark:function(e){return e.selectedPark},getSelectTrail:function(e){return e.selectedTrail},getSegments:function(e){return e.segments},getSegmentList:function(e){return e.segmentList},getNbLikesAssociated:function(e){return e.nbLikesAssociated.length}},Le={buildParkList:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.parkList=t;case 1:case"end":return r.stop()}}),r)})))()},buildTrailList:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.trailList=t;case 1:case"end":return r.stop()}}),r)})))()},STORE_PARK:function(e,t){e.selectedPark=t},STORE_TRAIL:function(e,t){e.selectedTrail=t},STORE_SEGMENTS:function(e,t){e.segments=t},STORE_SEGLIST:function(e,t){e.segmentList=t},COMPUTE_LIKES_ASSOCIATED:function(e){return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,me.getNbLikesAssociated(e.selectedTrail.id);case 2:e.nbLikesAssociated=t.sent;case 3:case"end":return t.stop()}}),t)})))()},setOnError:function(e){e.onError=!0}},ve={initializeParks:function(e){return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,me.getParks();case 4:n=t.sent,r("buildParkList",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),r("setOnError");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},initializeTrails:function(e){return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,me.getTrails();case 4:n=t.sent,r("buildTrailList",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),r("setOnError");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},setPark:function(e,t){var r=e.commit;r("STORE_PARK",t)},setTrail:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var n,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,me.getTrailsId(t);case 4:return i=r.sent,r.next=7,me.getAllSegments(i.segments);case 7:a=r.sent,n("STORE_TRAIL",i),n("STORE_SEGMENTS",i.segments),n("STORE_SEGLIST",a),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](1),n("setOnError");case 16:case"end":return r.stop()}}),r,null,[[1,13]])})))()},getLikesAssociated:function(e){var t=e.commit;try{t("COMPUTE_LIKES_ASSOCIATED")}catch(r){t("setOnError")}},resetPark:function(e){var t=e.commit;t("STORE_PARK",{}),t("STORE_TRAIL",{}),t("STORE_SEGMENTS",{}),t("STORE_SEGLIST",{})}},Ee={namespaced:!0,state:ge,actions:ve,mutations:Le,getters:he},_e={profileId:"",likes:[],likeToAdd:{},onError:!1,addedLike:{}},ke={getError:function(e){return e.onError},getLikes:function(e){return e.likes}},we={setLike:function(e,t){e.likeToAdd=t},getLikes:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.likes=t;case 1:case"end":return r.stop()}}),r)})))()},sendLike:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,J.sendLike(e.likeToAdd);case 3:e.addedLike=t,r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),e.onError=!0;case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},setProfileId:function(e,t){e.profileId=t},setOnError:function(e,t){e.onError=t},deleteLike:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={},e.likes.forEach((function(e){e.trailId===t&&(n=e)})),i={likeId:n.id,userId:e.profileId},r.next=5,J.deleteLike(i);case 5:case"end":return r.stop()}}),r)})))()}},Re={like:function(e,t){var r=e.commit;try{r("setLike",t),r("sendLike",Object)}catch(n){r("setOnError",!0)}},deleteLike:function(e,t){var r=e.commit;try{r("deleteLike",t)}catch(n){r("setOnError",!0)}},initializeLikes:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,""===t){r.next=9;break}return n("setProfileId",t),r.next=5,J.getLikes(t);case 5:i=r.sent,n("getLikes",i),r.next=10;break;case 9:n("setOnError",!0);case 10:case"end":return r.stop()}}),r)})))()}},be={namespaced:!0,state:_e,actions:Re,mutations:we,getters:ke},Oe=r("f8c1");n["default"].use(m["a"]);var Ae=new Oe["a"]({storage:window.sessionStorage,reducer:function(e){return{authentication:{token:e.authentication.token}}}}),Te=new m["a"].Store({modules:{authentication:M,profiles:te,park:Ee,likes:be},plugins:[Ae.plugin]}),Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("HomeComponent")],1)},xe=[],Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"container"},[r("div",{staticClass:"Park form-group col-lg-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.parkSelect,expression:"parkSelect"}],staticClass:"custom-select center",staticStyle:{width:"150px"},attrs:{id:"listPark"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.parkSelect=t.target.multiple?r:r[0]},function(t){return e.onChangePark(t)}]}},e._l(e.fetchParkList,(function(t){return r("option",{key:t.id,domProps:{value:t}},[e._v(" "+e._s(t.name))])})),0),r("select",{directives:[{name:"model",rawName:"v-model",value:e.trailSelect,expression:"trailSelect"}],staticClass:"custom-select center",staticStyle:{width:"150px"},attrs:{id:"listTrail"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.trailSelect=t.target.multiple?r:r[0]},function(t){return e.onChangeTrail(t)}]}},e._l(e.filteredList,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name))])})),0)]),r("div",{staticClass:"Like"},[r("p",[e._v(e._s(this.PARK_LABEL)+" "+e._s(e.parkSelect.name))]),r("p",[e._v(e._s(this.TRAIL_LABEL)+" "+e._s(e.getSelectedTrail.name))]),r("p",[e._v(e._s(this.AMOUNT_OF_LIKE_LABEL)+" "+e._s(e.getnbOfLikeAssociatedWithTrail))]),r("l-map",{staticStyle:{width:"600px",height:"300px"},attrs:{zoom:e.zoom,center:e.center}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.getSegList,(function(t){return r("l-polyline",{key:t.id,attrs:{"lat-lngs":t.coordinates,color:e.difficultySwitch(t.level)}})}))],2),e.isAlreadyLiked?r("button",{staticClass:"btn btn-outline-danger",on:{click:e.deleteLikeToTrail}},[e._v(e._s(this.DISLIKE_LABEL)+" "),r("svg",{staticClass:"bi bi-heart-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"}})])]):r("button",{staticClass:"btn btn-outline-danger",on:{click:e.setLikeToTrail}},[e._v(e._s(this.LIKE_LABEL)+" "),r("svg",{staticClass:"bi bi-heart",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"}})])])],1),r("div",{staticClass:"Trail center"})])])},Pe=[],ye=(r("34ac"),r("2cba"),r("608b")),Be=r("e0fd"),Ce=r("5976"),$e={components:{LMap:ye["a"],LTileLayer:Be["a"],LPolyline:Ce["a"]},created:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("park/initializeParks"),e.$store.dispatch("park/initializeTrails"),e.isValid();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){console.log("mounted"),this.$store.dispatch("park/resetPark"),this.center=[46.78601339822761,-71.28621784239412]},data:function(){return{trailSelect:"",parkSelect:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:[46.78601339822761,-71.28621784239412],PARK_LABEL:o.PARK_LABEL,TRAIL_LABEL:o.TRAIL_LABEL,AMOUNT_OF_LIKE_LABEL:o.AMOUNT_OF_LIKE_LABEL,LIKE_LABEL:o.LIKE_LABEL,DISLIKE_LABEL:o.DISLIKE_LABEL,ERROR_MESSAGE:o.ERROR_MESSAGE,ERROR_LIKE:o.ERROR_LIKE}},methods:{onChangePark:function(e){this.isValid(),this.$store.dispatch("park/setPark",e.target.value),this.wasAlreadyLogged()},onChangeTrail:function(e){var t=this;this.isValid(),this.$store.dispatch("likes/initializeLikes",this.profileId),this.$store.dispatch("park/setTrail",e.target.value).then((function(){t.$store.dispatch("park/getLikesAssociated")}),1e3),this.wasAlreadyLogged()},setLikeToTrail:function(){var e=this;this.isLoggedIn?(setTimeout((function(){e.refreshLikes()}),2115),this.$store.dispatch("likes/like",this.newLike)):this.$bvModal.msgBoxOk(this.ERROR_LIKE,{okTitle:"ok",centered:!0,okVariant:"success"})},deleteLikeToTrail:function(){var e=this;this.isLoggedIn&&(this.$store.dispatch("likes/deleteLike",this.trailSelect).then((function(){e.refreshLikes(),e.$store.dispatch("likes/initializeLikes",e.profileId)})),this.refreshLikes())},refreshLikes:function(){this.$store.dispatch("likes/initializeLikes",this.profileId)},difficultySwitch:function(e){switch(this.changeCenter(),e){case"Très Difficile":return"red";case"Difficile":return"orange";case"Intermédiaire":return"blue";case"Facile":return"green";case"Inconnue":return"black"}},changeCenter:function(){this.center=this.getSegList[0].coordinates[0]},wasAlreadyLogged:function(){this.$store.getters["authentication/isLoggedIn"]&&this.$store.getters["profiles/getProfile"]!=={}&&this.$store.dispatch("profiles/getProfile")},isValid:function(){var e=this;this.isLoggedIn&&(this.isValidUser||this.$bvModal.msgBoxOk(this.ERROR_MESSAGE,{okTitle:"logout",centered:!0,okVariant:"success"}).then((function(){e.$store.dispatch("authentication/logout").then((function(){e.$store.dispatch("profiles/resetProfile")})).then((function(){e.$router.push("/login")}))})))}},computed:{filteredList:function(){var e=this;return this.$store.getters["park/getTrailList"].filter((function(t){return t.parkId===e.parkSelect.id}))},fetchParkList:function(){return this.$store.getters["park/getParkList"]},getSelectedPark:function(){return this.$store.getters["park/getSelectPark"]},getSelectedTrail:function(){return this.$store.getters["park/getSelectTrail"]},getSegList:function(){return this.$store.state.park.segmentList},isLoggedIn:function(){return this.$store.getters["authentication/isLoggedIn"]},profileId:function(){return this.$store.getters["profiles/getAccountId"]},newLike:function(){var e={userId:this.$store.getters["profiles/getAccountId"],trailId:this.trailSelect};return e},isAlreadyLiked:function(){var e=this;return!!this.likesInProfile.find((function(t){return t.trailId===e.newLike.trailId}))},likesInProfile:function(){return this.$store.getters["likes/getLikes"]},nbOfLikeInProfile:function(){return this.likesInProfile.length},getnbOfLikeAssociatedWithTrail:function(){return this.$store.getters["park/getNbLikesAssociated"]},isValidToken:function(){return!0===this.$store.getters["authentication/isAlive"]&&!1===this.$store.getters["profiles/getError"]},isValidUser:function(){return!1===this.$store.getters["profiles/getError"]}}},je=$e,Ue=(r("c16b"),Object(l["a"])(je,Ie,Pe,!1,null,"3686ac15",null)),Ne=Ue.exports,Me={name:"Home",components:{HomeComponent:Ne}},Ge=Me,ze=Object(l["a"])(Ge,Se,xe,!1,null,null,null),De=ze.exports,Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("SignupComponent")],1)},Ve=[],He=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box center"},[r("div",{staticClass:"c"},[r("form",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProfile.name,expression:"newProfile.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:this.NAME_LABEL},domProps:{value:e.newProfile.name},on:{input:function(t){t.target.composing||e.$set(e.newProfile,"name",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProfile.email,expression:"newProfile.email"}],staticClass:"form-control",attrs:{type:"text",id:"email",name:"email",placeholder:this.EMAIL_LABEL},domProps:{value:e.newProfile.email},on:{input:function(t){t.target.composing||e.$set(e.newProfile,"email",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProfile.password,expression:"newProfile.password"}],staticClass:"form-control",attrs:{type:"text",id:"password",name:"password",placeholder:this.PASSWORD_LABEL},domProps:{value:e.newProfile.password},on:{input:function(t){t.target.composing||e.$set(e.newProfile,"password",t.target.value)}}}),r("br"),r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.signup}},[e._v(e._s(this.REGISTER_LABEL))])])])])},We=[],Fe={name:"SignupComponent",data:function(){return{newProfile:{email:"",password:"",name:""},NAME_LABEL:o.NAME_LABEL,PASSWORD_LABEL:o.PASSWORD_LABEL,EMAIL_LABEL:o.EMAIL_LABEL,REGISTER_LABEL:o.REGISTER_LABEL}},methods:{signup:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.newProfile.email||!e.newProfile.password){t.next=9;break}return t.next=3,console.log(e.newProfile);case 3:return t.next=5,e.$store.dispatch("authentication/register",e.completeProfile);case 5:if(!e.isLogged){t.next=9;break}return t.next=8,e.$store.dispatch("profiles/getProfile");case 8:e.$router.push("/");case 9:case"end":return t.stop()}}),t)})))()}},computed:{isLogged:function(){return this.$store.getters["authentication/isLoggedIn"]},completeProfile:function(){var e={name:this.newProfile.name,email:this.newProfile.email,password:this.newProfile.password};return e}}},Xe=Fe,qe=(r("c93c"),Object(l["a"])(Xe,He,We,!1,null,"5f8ec248",null)),Je=qe.exports,Qe={name:"Signup",components:{SignupComponent:Je}},Ye=Qe,Ze=Object(l["a"])(Ye,Ke,Ve,!1,null,"ae15c7fa",null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("LoginComponent")],1)},rt=[],nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box center"},[r("div",{staticClass:"c"},[r("form",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProfile.email,expression:"newProfile.email"}],staticClass:"form-control",attrs:{type:"text",id:"email",name:"email",placeholder:this.EMAIL_LABEL},domProps:{value:e.newProfile.email},on:{input:function(t){t.target.composing||e.$set(e.newProfile,"email",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newProfile.password,expression:"newProfile.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",name:"password",placeholder:this.PASSWORD_LABEL},domProps:{value:e.newProfile.password},on:{input:function(t){t.target.composing||e.$set(e.newProfile,"password",t.target.value)}}}),r("br"),r("button",{staticClass:"btn-primary",attrs:{id:"button",type:"button"},on:{click:e.login}},[e._v(e._s(this.LOGIN_BUTTON_LABEL))])]),r("br"),r("router-link",{attrs:{to:"/signup"}},[e._v(e._s(this.REGISTER_BUTTON_LABEL))])],1)])},it=[],at={name:"LoginComponent",data:function(){return{newProfile:{email:"",password:""},EMAIL_LABEL:o.EMAIL_LABEL,PASSWORD_LABEL:o.PASSWORD_LABEL,LOGIN_BUTTON_LABEL:o.LOGIN_BUTTON_LABEL,REGISTER_BUTTON_LABEL:o.REGISTER_BUTTON_LABEL,ERROR_MESSAGE:o.ERROR_MESSAGE_2}},created:function(){this.$store.dispatch("profiles/resetProfile")},methods:{login:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authentication/login",{email:e.newProfile.email,password:e.newProfile.password});case 2:e.isLogged?(e.$store.dispatch("profiles/getProfile"),e.$router.push("/")):(e.$store.dispatch("profiles/resetProfile"),e.$store.dispatch("profiles/setError",e.ERROR_MESSAGE),e.$bvModal.msgBoxOk("erreur dans la connection",{okTitle:"ok",centered:!0,okVariant:"success"}));case 3:case"end":return t.stop()}}),t)})))()}},computed:{isLogged:function(){return this.$store.getters["authentication/isLoggedIn"]}}},st=at,ot=(r("8918"),Object(l["a"])(st,nt,it,!1,null,"1e75078e",null)),ct=ot.exports,ut={name:"Login",components:{LoginComponent:ct}},lt=ut,pt=Object(l["a"])(lt,tt,rt,!1,null,"286461f7",null),dt=pt.exports,ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",{on:{click:e.logout}},[e._v("Déconnexion")])])},mt=[],gt={name:"LogoutComponent",methods:{logout:function(){this.$store.dispatch("authentication/logout"),this.$store.dispatch("profiles/resetProfile"),this.$router.push("/")}}},ht=gt,Lt=Object(l["a"])(ht,ft,mt,!1,null,"30c5ca16",null),vt=Lt.exports,Et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("AdminSecretComp")],1)},_t=[],kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(this.SECRET_TEXT))]),r("p",[e._v(e._s(this.SECRET_TIP))]),r("div",{staticClass:"input-group input-group-sm"},[e._l(this.dbd.data.users,(function(t){return r("div",{key:t.id,staticClass:"input-group-prepend",attrs:{value:t.name}},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-sm"}},[e._v(e._s(t))])])})),r("input",{staticClass:"form-control",attrs:{type:"text","aria-describedby":"inputGroup-sizing-sm"}})],2),r("div",{staticClass:"input-group input-group-sm"},e._l(this.dbd.data.likes,(function(t){return r("div",{key:t.id,staticClass:"input-group-prepend",attrs:{value:t}},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-sm"}},[e._v(e._s(t))])])})),0),r("div",{staticClass:"input-group input-group-sm"},e._l(this.dbd.data.parks,(function(t){return r("div",{key:t.id,staticClass:"input-group-prepend",attrs:{value:t}},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-sm"}},[e._v(e._s(t))])])})),0),r("div",{staticClass:"input-group input-group-sm"},[e._l(this.dbd.data.levels,(function(t){return r("div",{key:t.id,staticClass:"input-group-prepend",attrs:{value:t}},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-sm"}},[e._v(e._s(t))])])})),r("input",{staticClass:"form-control",attrs:{type:"text","aria-describedby":"inputGroup-sizing-sm"}})],2),r("div",{staticClass:"input-group input-group-sm"},[e._l(this.userd.data,(function(t){return r("div",{key:t.id,staticClass:"input-group-prepend",attrs:{value:t}},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-sm"}},[e._v(e._s(t))])])})),r("input",{staticClass:"form-control",attrs:{type:"text","aria-describedby":"inputGroup-sizing-sm"}})],2)])},wt=[],Rt={data:function(){return{dbd:{},userd:{},SECRET_TEXT:o.SECRET_TEXT,SECRET_TIP:o.SECRET_TIP}},created:function(){this.fetchall()},methods:{db:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.a.create({}).get("".concat(h,"/db"));case 2:e.dbd=t.sent;case 3:case"end":return t.stop()}}),t)})))()},user:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.a.create({}).get("".concat(h,"/generatedUsers"));case 2:e.userd=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchall:function(){this.db(),this.user()}}},bt=Rt,Ot=Object(l["a"])(bt,kt,wt,!1,null,"421e0bb7",null),At=Ot.exports,Tt={components:{AdminSecretComp:At}},St=Tt,xt=Object(l["a"])(St,Et,_t,!1,null,"626067c6",null),It=xt.exports,Pt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},yt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content-container"},[r("span",{staticClass:"title"},[e._v("Cette page n'existe pas...")])])}],Bt={},Ct=Object(l["a"])(Bt,Pt,yt,!1,null,null,null),$t=Ct.exports,jt=[{path:"/",name:"Home",component:De},{path:"/signup",name:"Signup",component:et},{path:"/login",name:"Login",component:dt,meta:{authPage:!0}},{path:"/logout",name:"Logout",component:vt},{path:"/admin",name:"Admin",component:It},{path:"*",name:"PageNotFound",component:$t}];n["default"].use(f["a"]);var Ut=new f["a"]({mode:"history",base:"/tp3/",routes:jt});Ut.beforeEach((function(e,t,r){e.meta.requiresAuth&&!Te.getters["authentication/isLoggedIn"]?r({name:"Login",query:{redirect:e.path}}):e.meta.authPage&&Te.getters["authentication/isLoggedIn"]?r({name:"Home"}):r()}));var Nt=Ut,Mt=r("7390"),Gt=r("d422"),zt=r("8472"),Dt=(r("5f3e"),r("41cf"),r("9a6e"),r("9b4d")),Kt=r.n(Dt);delete Kt.a.Icon.Default.prototype._getIconUrl,Kt.a.Icon.Default.mergeOptions({iconRetinaUrl:r("a741"),iconUrl:r("843f"),shadowUrl:r("9021")}),n["default"].use(Gt["a"]),n["default"].use(zt["a"]),n["default"].use(o),n["default"].component("l-map",ye["a"]),n["default"].component("l-tile-layer",Be["a"]),n["default"].component("l-marker",Mt["a"]),n["default"].config.productionTip=!1,new n["default"]({router:Nt,store:Te,render:function(e){return e(d)}}).$mount("#app")},"669a":function(e,t,r){},8918:function(e,t,r){"use strict";r("cfe5")},c16b:function(e,t,r){"use strict";r("25f0")},c93c:function(e,t,r){"use strict";r("669a")},cfe5:function(e,t,r){}});
//# sourceMappingURL=app.28795444.js.map